(()=>{"use strict";const e="888a73a8b27eb54c8d1ba56ed02ec435",t=e=>{let t=new Date(1e3*e);return`${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()]} ${t.getDate()}`},n=(e,t)=>{let n=new Date(1e3*(e+t));return`${n.getHours()}:${n.getMinutes()}:${n.getSeconds()}`},o=()=>document.querySelector("#toggle-button").classList.contains("metric")?"metric":"imperial",r=async(r,i)=>{const a=document.querySelector(".results");a.classList.contains("hide")||a.classList.toggle("hide");const c=document.querySelector(".form-control").value,s=await(async(o,r,i)=>{const a=o.toString().toLowerCase(),c=document.querySelector("#toggle-button").classList.contains("metric")?"metric":"imperial";let s;s=r&&i?await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${r}&lon=${i}&units=${c}&appid=${e}`):await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${a}&units=${c}&appid=${e}`);const{main:l,weather:d,sys:u,wind:m,name:p,coord:y,dt:g,timezone:w}=await s.json();return{temp:l.temp,description:d[0].main,flagUrl:`https://www.countryflags.io/${u.country}/flat/64.png`,windSpeed:`Wind: ${m.speed}`,location:`${p}, ${u.country}`,lat:y.lat,lon:y.lon,date:t(g),sunrise:`Sunrise: ${n(u.sunrise,w)} A.M`,sunset:`Sunset: ${n(u.sunset,w)} P.M`}})(c,r,i),l=await(async(n,o)=>{const r=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${n}&lon=${o}&units=metric&appid=${e}`),{daily:i}=await r.json(),[,a,c,s,l,d,u]=i;return[{date:t(a.dt),temp:a.temp.day,description:a.weather[0].main},{date:t(c.dt),temp:c.temp.day,description:s.weather[0].main},{date:t(s.dt),temp:s.temp.day,description:s.weather[0].main},{date:t(l.dt),temp:l.temp.day,description:l.weather[0].main},{date:t(d.dt),temp:d.temp.day,description:d.weather[0].main},{date:t(u.dt),temp:u.temp.day,description:u.weather[0].main}]})(s.lat,s.lon);document.querySelector(".location-date").innerHTML=s.date,document.querySelector(".location-name").innerHTML=s.location,document.querySelector(".location-flag").src=s.flagUrl,"metric"===o()?(document.querySelector(".location-temp").innerHTML=`${s.temp} °C`,document.querySelector(".location-wind-speed").innerHTML=`${s.windSpeed} meter/sec`):(document.querySelector(".location-temp").innerHTML=`${s.temp} °F`,document.querySelector(".location-wind-speed").innerHTML=`${s.windSpeed} mile/hour`),document.querySelector(".location-description").innerHTML=s.description,document.querySelector(".location-sunrise").innerHTML=s.sunrise,document.querySelector(".location-sunset").innerHTML=s.sunset;const d=document.querySelectorAll(".forecast-day");for(let[e,t]of d.entries()){let n="°C";"metric"!==o()&&(n="°F"),t.innerHTML=`\n    <h3>${l[e].date}</h3>\n    <p class="forecast-temp">${Math.ceil(l[e].temp)} ${n}</p>\n    <div class="forecast-image">\n    <p>${l[e].description}\n    <img src='../images/${l[e].description.toLowerCase()}.png' alt="weather" height="80" width="80" />\n    </div>`}document.querySelector("#google-maps-link").href=`https://www.google.com/maps/search/${s.lat},+${s.lon}`,a.classList.toggle("hide"),document.querySelector(".spinner-border").classList.toggle("hide"),document.querySelector(".view-map").classList.toggle("hide")};document.querySelector("#search-button").addEventListener("click",(()=>{document.querySelector(".spinner-border").classList.toggle("hide"),r()})),document.querySelector("#current-location").addEventListener("click",(async()=>{document.querySelector(".spinner-border").classList.toggle("hide");const{lat:e,lon:t}=await(async()=>{if(navigator.geolocation){const e=await new Promise(((e,t)=>{navigator.geolocation.getCurrentPosition(e,t)}));return{lon:e.coords.longitude,lat:e.coords.latitude}}alert("Geolocation is not supported by your browser or is not enabled.")})();r(e,t)})),document.querySelector("#toggle-button").addEventListener("click",(e=>{e.target.classList.toggle("metric"),e.target.classList.toggle("imperial"),(()=>{let e=document.querySelector(".location-temp"),t=Array.from(document.querySelectorAll(".forecast-temp")),n=e.innerHTML.slice(-1);((e,t)=>{let n=document.querySelector(".location-temp");if("C"===e){let e=(9*t/5+32).toFixed(1);n.innerHTML=`${e} °F`}else if("F"===e){let e=(5*(t-32)/9).toFixed(1);n.innerHTML=`${e} °C`}})(n,parseFloat(e.innerHTML.slice(0,-3)).toFixed(1)),((e,t)=>{t.forEach((t=>{let n=parseFloat(t.innerHTML.slice(0,-3)).toFixed(1);if("C"===e){let e=(9*n/5+32).toFixed(1);t.innerHTML=`${e} °F`}else if("F"===e){let e=(5*(n-32)/9).toFixed(1);t.innerHTML=`${e} °C`}}))})(n,t)})()}))})();